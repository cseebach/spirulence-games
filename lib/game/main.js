// Generated by CoffeeScript 1.3.3
(function() {

  ig.module('game.main').requires('impact.game').defines(function() {
    var BackGround, EntityGenerator, MyGame;
    EntityGenerator = ig.Entity.extend({
      size: {
        x: 16,
        y: 16
      },
      collides: ig.Entity.COLLIDES.PASSIVE,
      animSheet: new ig.AnimationSheet('media/generator.png', 16, 16),
      init: function(x, y, settings) {
        this.parent(x, y, settings);
        return this.addAnim('idle', 0.1, [0, 1]);
      }
    });
    BackGround = ig.Entity.extend({
      size: {
        x: 320,
        y: 240
      },
      zIndex: 50,
      animSheet: new ig.AnimationSheet("media/background.png", 320, 240),
      init: function(x, y, settings) {
        this.parent(x, y, settings);
        return this.addAnim('idle', 0.1, [0]);
      }
    });
    MyGame = ig.Game.extend({
      bg: new ig.Image('media/background.png'),
      init: function() {
        ig.input.bind(ig.KEY.MOUSE1, 'place_generator');
        this.spawnEntity(BackGround, 0, 0);
        return this.placeEntity = this.spawnEntity(EntityGenerator, -100, -100);
      },
      update: function() {
        var placeX, placeY;
        this.parent();
        placeX = Math.floor(ig.input.mouse.x / 16) * 16;
        placeY = Math.floor(ig.input.mouse.y / 16) * 16;
        if (ig.input.released("place_generator")) {
          return this.spawnEntity(EntityGenerator, placeX, placeY);
        } else {
          this.placeEntity.pos.x = placeX;
          return this.placeEntity.pos.y = placeY;
        }
      },
      draw: function() {
        return this.parent();
      }
    });
    return ig.main('#canvas', MyGame, 60, 320, 240, 2);
  });

}).call(this);
